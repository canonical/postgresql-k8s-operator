{"uid":"b891b8eddb2073ce","name":"test_tls","fullName":"tests.integration.test_tls#test_tls","historyId":"2261d1bf845985b00a372e1561d88e5e","time":{"start":1751074266715,"stop":1751074810738,"duration":544023},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1751074258904,"stop":1751074258905,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1751074258905,"stop":1751074258905,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1751074258905,"stop":1751074259142,"duration":237},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1751074266714,"stop":1751074266714,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"passed","steps":[],"attachments":[{"uid":"8c61d4c503600815","name":"log","source":"8c61d4c503600815.txt","type":"text/plain","size":4272}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1751074810739,"stop":1751074810739,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1751075141508,"stop":1751075141891,"duration":383},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1751075141892,"stop":1751075141892,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1751075141892,"stop":1751075141892,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1751075141892,"stop":1751075141892,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_tls"},{"name":"host","value":"fv-az1390-649"},{"name":"thread","value":"19416-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_tls"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"8800169de8923f9e","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":8,"broken":1,"skipped":0,"passed":293,"unknown":6,"total":308},"items":[{"uid":"61b990ae9c0c8164","reportUrl":"../4211//#testresult/61b990ae9c0c8164","status":"passed","time":{"start":1750987889980,"stop":1750988478636,"duration":588656}},{"uid":"bf1a91ebad37f47f","reportUrl":"../4205//#testresult/bf1a91ebad37f47f","status":"passed","time":{"start":1750901491162,"stop":1750902065819,"duration":574657}},{"uid":"50fc324f3211f886","reportUrl":"../4193//#testresult/50fc324f3211f886","status":"passed","time":{"start":1750815089380,"stop":1750815699535,"duration":610155}},{"uid":"ae35eb364beced84","reportUrl":"../4186//#testresult/ae35eb364beced84","status":"passed","time":{"start":1750728639881,"stop":1750729231798,"duration":591917}},{"uid":"950c5ff21bf430a6","reportUrl":"../4185//#testresult/950c5ff21bf430a6","status":"passed","time":{"start":1750642261929,"stop":1750642839290,"duration":577361}},{"uid":"d06503cb8e859bc","reportUrl":"../4184//#testresult/d06503cb8e859bc","status":"passed","time":{"start":1750555846261,"stop":1750556415582,"duration":569321}},{"uid":"308ecbe985442fa7","reportUrl":"../4183//#testresult/308ecbe985442fa7","status":"passed","time":{"start":1750469783775,"stop":1750470389192,"duration":605417}},{"uid":"418f7230f07de995","reportUrl":"../4177//#testresult/418f7230f07de995","status":"passed","time":{"start":1750383033004,"stop":1750383568969,"duration":535965}},{"uid":"c476c7ddc23a7ea7","reportUrl":"../4167//#testresult/c476c7ddc23a7ea7","status":"passed","time":{"start":1750296691526,"stop":1750297249515,"duration":557989}},{"uid":"840047a99a843139","reportUrl":"../4159//#testresult/840047a99a843139","status":"failed","statusDetails":"AssertionError: TLS is not being used on pg_rewind connections\nassert 'connection authorized: user=rewind database=postgres SSL enabled' in '/var/log/postgresql/postgresql-3_0132.log:\\t                  SELECT t.user, STRING_AGG(DISTINCT t.database, \\',\\') AS databases FROM( SELECT u.usename AS user, CASE WHEN u.usesuper THEN \\'all\\' ELSE d.datname END AS database FROM ( SELECT usename, usesuper FROM pg_catalog.pg_user WHERE usename NOT IN (\\'backup\\', \\'monitoring\\', \\'operator\\', \\'postgres\\', \\'replication\\', \\'rewind\\')) AS u JOIN ( SELECT datname FROM pg_catalog.pg_database WHERE NOT datistemplate ) AS d ON has_database_privilege(u.usename, d.datname, \\'CONNECT\\') ) AS t GROUP BY 1;\\n/var/log/postgresql/postgresql-3_0132.log:2025-06-18 01:32:51 UTC [885]: user=operator,db=postgres,app=[unknown],client=10.1.0.147,line=15 LOG:  00000: statement: GRANT ALL PRIVILEGES ON DATABASE postgres TO \"rewind\";\\n/var/log/postgresql/postgresql-3_0132.log:2025-06-18 01:32:51 UTC [890]: user=operator,db=postgres,app=[unknown],client=10.1.0.147,line=11 LOG:  00000: statement: GRANT \"internal_access\" TO \"rewind\";\\n/var/log/postgresql/postgresql-3_0138.log:2025-06-18 01:38:44 UTC [6592]: user=operator,db=postgres,app=[unknown],client=10.1.0.147,line=9 LOG:  00000: statement: CREATE TABLE pgrewindtest (testcol INT);\\n/var/log/postgresql/postgresql-3_0138.log:2025-06-18 01:38:44 UTC [6592]: user=operator,db=postgres,app=[unknown],client=10.1.0.147,line=11 LOG:  00000: AUDIT: SESSION,2,1,DDL,CREATE TABLE,TABLE,public.pgrewindtest,CREATE TABLE pgrewindtest (testcol INT);,<not logged>\\n'","time":{"start":1750210255696,"stop":1750210953336,"duration":697640}},{"uid":"15ee85c9f2d565bb","reportUrl":"../4148//#testresult/15ee85c9f2d565bb","status":"passed","time":{"start":1750123887804,"stop":1750124431100,"duration":543296}},{"uid":"148a7c13b00f6aaa","reportUrl":"../4140//#testresult/148a7c13b00f6aaa","status":"failed","statusDetails":"AssertionError: TLS is not being used on pg_rewind connections\nassert 'connection authorized: user=rewind database=postgres SSL enabled' in '/var/log/postgresql/postgresql-1_0136.log:\\t                  SELECT t.user, STRING_AGG(DISTINCT t.database, \\',\\') AS databases FROM( SELECT u.usename AS user, CASE WHEN u.usesuper THEN \\'all\\' ELSE d.datname END AS database FROM ( SELECT usename, usesuper FROM pg_catalog.pg_user WHERE usename NOT IN (\\'backup\\', \\'monitoring\\', \\'operator\\', \\'postgres\\', \\'replication\\', \\'rewind\\')) AS u JOIN ( SELECT datname FROM pg_catalog.pg_database WHERE NOT datistemplate ) AS d ON has_database_privilege(u.usename, d.datname, \\'CONNECT\\') ) AS t GROUP BY 1;\\n/var/log/postgresql/postgresql-1_0136.log:2025-06-16 01:36:40 UTC [881]: user=operator,db=postgres,app=[unknown],client=10.1.0.162,line=15 LOG:  00000: statement: GRANT ALL PRIVILEGES ON DATABASE postgres TO \"rewind\";\\n/var/log/postgresql/postgresql-1_0136.log:2025-06-16 01:36:40 UTC [886]: user=operator,db=postgres,app=[unknown],client=10.1.0.162,line=11 LOG:  00000: statement: GRANT \"internal_access\" TO \"rewind\";\\n/var/log/postgresql/postgresql-1_0142.log:2025-06-16 01:42:31 UTC [6582]: user=operator,db=postgres,app=[unknown],client=10.1.0.162,line=9 LOG:  00000: statement: CREATE TABLE pgrewindtest (testcol INT);\\n/var/log/postgresql/postgresql-1_0142.log:2025-06-16 01:42:31 UTC [6582]: user=operator,db=postgres,app=[unknown],client=10.1.0.162,line=11 LOG:  00000: AUDIT: SESSION,2,1,DDL,CREATE TABLE,TABLE,public.pgrewindtest,CREATE TABLE pgrewindtest (testcol INT);,<not logged>\\n'","time":{"start":1750037683957,"stop":1750038373663,"duration":689706}},{"uid":"15753e6f2d50b50c","reportUrl":"../4139//#testresult/15753e6f2d50b50c","status":"passed","time":{"start":1749951090411,"stop":1749951661144,"duration":570733}},{"uid":"46016ec0e5db228","reportUrl":"../4137//#testresult/46016ec0e5db228","status":"passed","time":{"start":1749864633317,"stop":1749865205061,"duration":571744}},{"uid":"26eb24b079e61b3c","reportUrl":"../4136//#testresult/26eb24b079e61b3c","status":"passed","time":{"start":1749778236696,"stop":1749778814170,"duration":577474}},{"uid":"b4b8f67aee83602b","reportUrl":"../4133//#testresult/b4b8f67aee83602b","status":"passed","time":{"start":1749691950489,"stop":1749692497763,"duration":547274}},{"uid":"dc19adeb0d0f3469","reportUrl":"../4132//#testresult/dc19adeb0d0f3469","status":"passed","time":{"start":1749605419943,"stop":1749605995108,"duration":575165}},{"uid":"11c997653c38e646","reportUrl":"../4120//#testresult/11c997653c38e646","status":"passed","time":{"start":1749519711510,"stop":1749520294106,"duration":582596}},{"uid":"71dda1f0babf92e8","reportUrl":"../4116//#testresult/71dda1f0babf92e8","status":"failed","statusDetails":"AssertionError: TLS is not being used on pg_rewind connections\nassert 'connection authorized: user=rewind database=postgres SSL enabled' in '/var/log/postgresql/postgresql-1_0132.log:\\t                  SELECT t.user, STRING_AGG(DISTINCT t.database, \\',\\') AS databases FROM( SELECT u.usename AS user, CASE WHEN u.usesuper THEN \\'all\\' ELSE d.datname END AS database FROM ( SELECT usename, usesuper FROM pg_catalog.pg_user WHERE usename NOT IN (\\'backup\\', \\'monitoring\\', \\'operator\\', \\'postgres\\', \\'replication\\', \\'rewind\\')) AS u JOIN ( SELECT datname FROM pg_catalog.pg_database WHERE NOT datistemplate ) AS d ON has_database_privilege(u.usename, d.datname, \\'CONNECT\\') ) AS t GROUP BY 1;\\n/var/log/postgresql/postgresql-1_0132.log:2025-06-09 01:32:41 UTC [885]: user=operator,db=postgres,app=[unknown],client=10.1.0.52,line=15 LOG:  00000: statement: GRANT ALL PRIVILEGES ON DATABASE postgres TO \"rewind\";\\n/var/log/postgresql/postgresql-1_0132.log:2025-06-09 01:32:41 UTC [890]: user=operator,db=postgres,app=[unknown],client=10.1.0.52,line=11 LOG:  00000: statement: GRANT \"internal_access\" TO \"rewind\";\\n/var/log/postgresql/postgresql-1_0138.log:2025-06-09 01:38:11 UTC [6542]: user=operator,db=postgres,app=[unknown],client=10.1.0.52,line=9 LOG:  00000: statement: CREATE TABLE pgrewindtest (testcol INT);\\n/var/log/postgresql/postgresql-1_0138.log:2025-06-09 01:38:11 UTC [6542]: user=operator,db=postgres,app=[unknown],client=10.1.0.52,line=11 LOG:  00000: AUDIT: SESSION,2,1,DDL,CREATE TABLE,TABLE,public.pgrewindtest,CREATE TABLE pgrewindtest (testcol INT);,<not logged>\\n'","time":{"start":1749432646200,"stop":1749433319352,"duration":673152}},{"uid":"b5b21bc86064aca9","reportUrl":"../4114//#testresult/b5b21bc86064aca9","status":"passed","time":{"start":1749346251298,"stop":1749346820833,"duration":569535}}]},"tags":["asyncio","abort_on_fail"]},"source":"b891b8eddb2073ce.json","parameterValues":[]}