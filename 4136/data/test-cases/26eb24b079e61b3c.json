{"uid":"26eb24b079e61b3c","name":"test_tls","fullName":"tests.integration.test_tls#test_tls","historyId":"2261d1bf845985b00a372e1561d88e5e","time":{"start":1749778236696,"stop":1749778814170,"duration":577474},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"ops_test","time":{"start":1749778229172,"stop":1749778229391,"duration":219},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1749778229172,"stop":1749778229172,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1749778229172,"stop":1749778229172,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1749778236696,"stop":1749778236696,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"passed","steps":[],"attachments":[{"uid":"2336b1e437b77a47","name":"log","source":"2336b1e437b77a47.txt","type":"text/plain","size":5584}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1749778814171,"stop":1749778814171,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1749779110001,"stop":1749779110358,"duration":357},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1749779110358,"stop":1749779110358,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1749779110359,"stop":1749779110359,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1749779110359,"stop":1749779110359,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_tls"},{"name":"host","value":"fv-az1371-8"},{"name":"thread","value":"19569-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_tls"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"b6927be4b7a0daf4","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":6,"broken":1,"skipped":0,"passed":280,"unknown":6,"total":293},"items":[{"uid":"b4b8f67aee83602b","reportUrl":"../4133//#testresult/b4b8f67aee83602b","status":"passed","time":{"start":1749691950489,"stop":1749692497763,"duration":547274}},{"uid":"dc19adeb0d0f3469","reportUrl":"../4132//#testresult/dc19adeb0d0f3469","status":"passed","time":{"start":1749605419943,"stop":1749605995108,"duration":575165}},{"uid":"11c997653c38e646","reportUrl":"../4120//#testresult/11c997653c38e646","status":"passed","time":{"start":1749519711510,"stop":1749520294106,"duration":582596}},{"uid":"71dda1f0babf92e8","reportUrl":"../4116//#testresult/71dda1f0babf92e8","status":"failed","statusDetails":"AssertionError: TLS is not being used on pg_rewind connections\nassert 'connection authorized: user=rewind database=postgres SSL enabled' in '/var/log/postgresql/postgresql-1_0132.log:\\t                  SELECT t.user, STRING_AGG(DISTINCT t.database, \\',\\') AS databases FROM( SELECT u.usename AS user, CASE WHEN u.usesuper THEN \\'all\\' ELSE d.datname END AS database FROM ( SELECT usename, usesuper FROM pg_catalog.pg_user WHERE usename NOT IN (\\'backup\\', \\'monitoring\\', \\'operator\\', \\'postgres\\', \\'replication\\', \\'rewind\\')) AS u JOIN ( SELECT datname FROM pg_catalog.pg_database WHERE NOT datistemplate ) AS d ON has_database_privilege(u.usename, d.datname, \\'CONNECT\\') ) AS t GROUP BY 1;\\n/var/log/postgresql/postgresql-1_0132.log:2025-06-09 01:32:41 UTC [885]: user=operator,db=postgres,app=[unknown],client=10.1.0.52,line=15 LOG:  00000: statement: GRANT ALL PRIVILEGES ON DATABASE postgres TO \"rewind\";\\n/var/log/postgresql/postgresql-1_0132.log:2025-06-09 01:32:41 UTC [890]: user=operator,db=postgres,app=[unknown],client=10.1.0.52,line=11 LOG:  00000: statement: GRANT \"internal_access\" TO \"rewind\";\\n/var/log/postgresql/postgresql-1_0138.log:2025-06-09 01:38:11 UTC [6542]: user=operator,db=postgres,app=[unknown],client=10.1.0.52,line=9 LOG:  00000: statement: CREATE TABLE pgrewindtest (testcol INT);\\n/var/log/postgresql/postgresql-1_0138.log:2025-06-09 01:38:11 UTC [6542]: user=operator,db=postgres,app=[unknown],client=10.1.0.52,line=11 LOG:  00000: AUDIT: SESSION,2,1,DDL,CREATE TABLE,TABLE,public.pgrewindtest,CREATE TABLE pgrewindtest (testcol INT);,<not logged>\\n'","time":{"start":1749432646200,"stop":1749433319352,"duration":673152}},{"uid":"b5b21bc86064aca9","reportUrl":"../4114//#testresult/b5b21bc86064aca9","status":"passed","time":{"start":1749346251298,"stop":1749346820833,"duration":569535}},{"uid":"89d2310284d3a1a2","reportUrl":"../4113//#testresult/89d2310284d3a1a2","status":"passed","time":{"start":1749259863812,"stop":1749260457274,"duration":593462}},{"uid":"260b96d745726436","reportUrl":"../4109//#testresult/260b96d745726436","status":"passed","time":{"start":1749173470260,"stop":1749174075147,"duration":604887}},{"uid":"ec09a2fafc680e4b","reportUrl":"../4097//#testresult/ec09a2fafc680e4b","status":"passed","time":{"start":1749087264317,"stop":1749087869840,"duration":605523}},{"uid":"64738679bb4a9db2","reportUrl":"../4096//#testresult/64738679bb4a9db2","status":"failed","statusDetails":"AssertionError: TLS is not being used on pg_rewind connections\nassert 'connection authorized: user=rewind database=postgres SSL enabled' in '/var/log/postgresql/postgresql-3_0134.log:\\t                  SELECT t.user, STRING_AGG(DISTINCT t.database, \\',\\') AS databases FROM( SELECT u.usename AS user, CASE WHEN u.usesuper THEN \\'all\\' ELSE d.datname END AS database FROM ( SELECT usename, usesuper FROM pg_catalog.pg_user WHERE usename NOT IN (\\'backup\\', \\'monitoring\\', \\'operator\\', \\'postgres\\', \\'replication\\', \\'rewind\\')) AS u JOIN ( SELECT datname FROM pg_catalog.pg_database WHERE NOT datistemplate ) AS d ON has_database_privilege(u.usename, d.datname, \\'CONNECT\\') ) AS t GROUP BY 1;\\n/var/log/postgresql/postgresql-3_0134.log:2025-06-04 01:34:33 UTC [885]: user=operator,db=postgres,app=[unknown],client=10.1.0.130,line=15 LOG:  00000: statement: GRANT ALL PRIVILEGES ON DATABASE postgres TO \"rewind\";\\n/var/log/postgresql/postgresql-3_0134.log:2025-06-04 01:34:33 UTC [890]: user=operator,db=postgres,app=[unknown],client=10.1.0.130,line=11 LOG:  00000: statement: GRANT \"internal_access\" TO \"rewind\";\\n/var/log/postgresql/postgresql-3_0140.log:2025-06-04 01:40:37 UTC [6605]: user=operator,db=postgres,app=[unknown],client=10.1.0.130,line=9 LOG:  00000: statement: CREATE TABLE pgrewindtest (testcol INT);\\n/var/log/postgresql/postgresql-3_0140.log:2025-06-04 01:40:37 UTC [6605]: user=operator,db=postgres,app=[unknown],client=10.1.0.130,line=11 LOG:  00000: AUDIT: SESSION,2,1,DDL,CREATE TABLE,TABLE,public.pgrewindtest,CREATE TABLE pgrewindtest (testcol INT);,<not logged>\\n'","time":{"start":1749000753556,"stop":1749001460024,"duration":706468}},{"uid":"6f51884f2afea617","reportUrl":"../4089//#testresult/6f51884f2afea617","status":"passed","time":{"start":1748914248478,"stop":1748914806755,"duration":558277}},{"uid":"86a52f9662c51f21","reportUrl":"../4088//#testresult/86a52f9662c51f21","status":"passed","time":{"start":1748828230221,"stop":1748828829051,"duration":598830}},{"uid":"f5595c7f54a1e1fb","reportUrl":"../4084//#testresult/f5595c7f54a1e1fb","status":"passed","time":{"start":1748741473885,"stop":1748742034741,"duration":560856}},{"uid":"88046156f2528771","reportUrl":"../4083//#testresult/88046156f2528771","status":"failed","statusDetails":"AssertionError: TLS is not being used on pg_rewind connections\nassert 'connection authorized: user=rewind database=postgres SSL enabled' in '/var/log/postgresql/postgresql-6_0132.log:\\t                  SELECT t.user, STRING_AGG(DISTINCT t.database, \\',\\') AS databases FROM( SELECT u.usename AS user, CASE WHEN u.usesuper THEN \\'all\\' ELSE d.datname END AS database FROM ( SELECT usename, usesuper FROM pg_catalog.pg_user WHERE usename NOT IN (\\'backup\\', \\'monitoring\\', \\'operator\\', \\'postgres\\', \\'replication\\', \\'rewind\\')) AS u JOIN ( SELECT datname FROM pg_catalog.pg_database WHERE NOT datistemplate ) AS d ON has_database_privilege(u.usename, d.datname, \\'CONNECT\\') ) AS t GROUP BY 1;\\n/var/log/postgresql/postgresql-6_0132.log:2025-05-31 01:32:08 UTC [883]: user=operator,db=postgres,app=[unknown],client=10.1.0.39,line=15 LOG:  00000: statement: GRANT ALL PRIVILEGES ON DATABASE postgres TO \"rewind\";\\n/var/log/postgresql/postgresql-6_0132.log:2025-05-31 01:32:08 UTC [888]: user=operator,db=postgres,app=[unknown],client=10.1.0.39,line=11 LOG:  00000: statement: GRANT \"internal_access\" TO \"rewind\";\\n/var/log/postgresql/postgresql-6_0138.log:2025-05-31 01:38:00 UTC [6575]: user=operator,db=postgres,app=[unknown],client=10.1.0.39,line=9 LOG:  00000: statement: CREATE TABLE pgrewindtest (testcol INT);\\n/var/log/postgresql/postgresql-6_0138.log:2025-05-31 01:38:00 UTC [6575]: user=operator,db=postgres,app=[unknown],client=10.1.0.39,line=11 LOG:  00000: AUDIT: SESSION,2,1,DDL,CREATE TABLE,TABLE,public.pgrewindtest,CREATE TABLE pgrewindtest (testcol INT);,<not logged>\\n'","time":{"start":1748655012175,"stop":1748655706590,"duration":694415}},{"uid":"948d0f72c5e72a56","reportUrl":"../4080//#testresult/948d0f72c5e72a56","status":"passed","time":{"start":1748568590727,"stop":1748569142848,"duration":552121}},{"uid":"8bac92f120c8b100","reportUrl":"../4078//#testresult/8bac92f120c8b100","status":"failed","statusDetails":"AssertionError: TLS is not being used on pg_rewind connections\nassert 'connection authorized: user=rewind database=postgres SSL enabled' in '/var/log/postgresql/postgresql-3_0133.log:\\t                  SELECT t.user, STRING_AGG(DISTINCT t.database, \\',\\') AS databases FROM( SELECT u.usename AS user, CASE WHEN u.usesuper THEN \\'all\\' ELSE d.datname END AS database FROM ( SELECT usename, usesuper FROM pg_catalog.pg_user WHERE usename NOT IN (\\'backup\\', \\'monitoring\\', \\'operator\\', \\'postgres\\', \\'replication\\', \\'rewind\\')) AS u JOIN ( SELECT datname FROM pg_catalog.pg_database WHERE NOT datistemplate ) AS d ON has_database_privilege(u.usename, d.datname, \\'CONNECT\\') ) AS t GROUP BY 1;\\n/var/log/postgresql/postgresql-3_0133.log:2025-05-28 01:33:11 UTC [884]: user=operator,db=postgres,app=[unknown],client=10.1.0.124,line=15 LOG:  00000: statement: GRANT ALL PRIVILEGES ON DATABASE postgres TO \"rewind\";\\n/var/log/postgresql/postgresql-3_0133.log:2025-05-28 01:33:11 UTC [889]: user=operator,db=postgres,app=[unknown],client=10.1.0.124,line=11 LOG:  00000: statement: GRANT \"internal_access\" TO \"rewind\";\\n/var/log/postgresql/postgresql-3_0138.log:2025-05-28 01:38:46 UTC [6532]: user=operator,db=postgres,app=[unknown],client=10.1.0.124,line=9 LOG:  00000: statement: CREATE TABLE pgrewindtest (testcol INT);\\n/var/log/postgresql/postgresql-3_0138.log:2025-05-28 01:38:46 UTC [6532]: user=operator,db=postgres,app=[unknown],client=10.1.0.124,line=11 LOG:  00000: AUDIT: SESSION,2,1,DDL,CREATE TABLE,TABLE,public.pgrewindtest,CREATE TABLE pgrewindtest (testcol INT);,<not logged>\\n'","time":{"start":1748395873577,"stop":1748396554007,"duration":680430}},{"uid":"48e8cfc130067377","reportUrl":"../4070//#testresult/48e8cfc130067377","status":"passed","time":{"start":1748223036595,"stop":1748223667150,"duration":630555}},{"uid":"bde29b2ee2373779","reportUrl":"../4068//#testresult/bde29b2ee2373779","status":"passed","time":{"start":1748050678255,"stop":1748051233158,"duration":554903}},{"uid":"3faf1037990c2a74","reportUrl":"../4067//#testresult/3faf1037990c2a74","status":"passed","time":{"start":1747963801285,"stop":1747964389354,"duration":588069}},{"uid":"ba68c0845c605673","reportUrl":"../4066//#testresult/ba68c0845c605673","status":"failed","statusDetails":"AssertionError: TLS is not being used on pg_rewind connections\nassert 'connection authorized: user=rewind database=postgres SSL enabled' in '/var/log/postgresql/postgresql-4_0134.log:\\t                  SELECT t.user, STRING_AGG(DISTINCT t.database, \\',\\') AS databases FROM( SELECT u.usename AS user, CASE WHEN u.usesuper THEN \\'all\\' ELSE d.datname END AS database FROM ( SELECT usename, usesuper FROM pg_catalog.pg_user WHERE usename NOT IN (\\'backup\\', \\'monitoring\\', \\'operator\\', \\'postgres\\', \\'replication\\', \\'rewind\\')) AS u JOIN ( SELECT datname FROM pg_catalog.pg_database WHERE NOT datistemplate ) AS d ON has_database_privilege(u.usename, d.datname, \\'CONNECT\\') ) AS t GROUP BY 1;\\n/var/log/postgresql/postgresql-4_0134.log:2025-05-22 01:34:21 UTC [883]: user=operator,db=postgres,app=[unknown],client=10.1.0.229,line=15 LOG:  00000: statement: GRANT ALL PRIVILEGES ON DATABASE postgres TO \"rewind\";\\n/var/log/postgresql/postgresql-4_0134.log:2025-05-22 01:34:21 UTC [888]: user=operator,db=postgres,app=[unknown],client=10.1.0.229,line=11 LOG:  00000: statement: GRANT \"internal_access\" TO \"rewind\";\\n/var/log/postgresql/postgresql-4_0140.log:2025-05-22 01:40:15 UTC [6559]: user=operator,db=postgres,app=[unknown],client=10.1.0.229,line=9 LOG:  00000: statement: CREATE TABLE pgrewindtest (testcol INT);\\n/var/log/postgresql/postgresql-4_0140.log:2025-05-22 01:40:15 UTC [6559]: user=operator,db=postgres,app=[unknown],client=10.1.0.229,line=11 LOG:  00000: AUDIT: SESSION,2,1,DDL,CREATE TABLE,TABLE,public.pgrewindtest,CREATE TABLE pgrewindtest (testcol INT);,<not logged>\\n'","time":{"start":1747877541157,"stop":1747878242714,"duration":701557}},{"uid":"b7d4546dd5bd8bb4","reportUrl":"../4065//#testresult/b7d4546dd5bd8bb4","status":"passed","time":{"start":1747791143458,"stop":1747791710406,"duration":566948}}]},"tags":["asyncio","abort_on_fail"]},"source":"26eb24b079e61b3c.json","parameterValues":[]}