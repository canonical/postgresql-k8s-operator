{"uid":"4b4757e66a1912dae1a509f688f20b0f","name":"categories","children":[{"name":"Product defects","children":[{"name":"AssertionError: TLS is not being used on pg_rewind connections\nassert 'connection authorized: user=rewind database=postgres SSL enabled' in '/var/log/postgresql/postgresql-3_0134.log:\\t                  SELECT t.user, STRING_AGG(DISTINCT t.database, \\',\\') AS databases FROM( SELECT u.usename AS user, CASE WHEN u.usesuper THEN \\'all\\' ELSE d.datname END AS database FROM ( SELECT usename, usesuper FROM pg_catalog.pg_user WHERE usename NOT IN (\\'backup\\', \\'monitoring\\', \\'operator\\', \\'postgres\\', \\'replication\\', \\'rewind\\')) AS u JOIN ( SELECT datname FROM pg_catalog.pg_database WHERE NOT datistemplate ) AS d ON has_database_privilege(u.usename, d.datname, \\'CONNECT\\') ) AS t GROUP BY 1;\\n/var/log/postgresql/postgresql-3_0134.log:2025-06-04 01:34:33 UTC [885]: user=operator,db=postgres,app=[unknown],client=10.1.0.130,line=15 LOG:  00000: statement: GRANT ALL PRIVILEGES ON DATABASE postgres TO \"rewind\";\\n/var/log/postgresql/postgresql-3_0134.log:2025-06-04 01:34:33 UTC [890]: user=operator,db=postgres,app=[unknown],client=10.1.0.130,line=11 LOG:  00000: statement: GRANT \"internal_access\" TO \"rewind\";\\n/var/log/postgresql/postgresql-3_0140.log:2025-06-04 01:40:37 UTC [6605]: user=operator,db=postgres,app=[unknown],client=10.1.0.130,line=9 LOG:  00000: statement: CREATE TABLE pgrewindtest (testcol INT);\\n/var/log/postgresql/postgresql-3_0140.log:2025-06-04 01:40:37 UTC [6605]: user=operator,db=postgres,app=[unknown],client=10.1.0.130,line=11 LOG:  00000: AUDIT: SESSION,2,1,DDL,CREATE TABLE,TABLE,public.pgrewindtest,CREATE TABLE pgrewindtest (testcol INT);,<not logged>\\n'","children":[{"name":"test_tls","uid":"64738679bb4a9db2","parentUid":"084fe741f2316f4b3d173bb49e43be8a","status":"failed","time":{"start":1749000753556,"stop":1749001460024,"duration":706468},"flaky":true,"newFailed":true,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail"]}],"uid":"084fe741f2316f4b3d173bb49e43be8a"},{"name":"AssertionError: members report different lists of cluster members.","children":[{"name":"test_scaling_to_zero","uid":"bf0cfae7db62980d","parentUid":"c1fa16ad4f08927c4309a8278038e078","status":"failed","time":{"start":1749001171151,"stop":1749001551152,"duration":380001},"flaky":true,"newFailed":true,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail"]}],"uid":"c1fa16ad4f08927c4309a8278038e078"},{"name":"AssertionError: testing.postgresql-k8s-0: writes to the db were missed.","children":[{"name":"test_interruption_db_process[SIGKILL-/usr/bin/patroni]","uid":"323e94a496f12b3b","parentUid":"c0f17da919267be9a42adc45e259f8aa","status":"failed","time":{"start":1749002026773,"stop":1749002130668,"duration":103895},"flaky":true,"newFailed":true,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":["'/usr/bin/patroni'","'SIGKILL'"],"tags":["asyncio","abort_on_fail"]}],"uid":"c0f17da919267be9a42adc45e259f8aa"},{"name":"AssertionError: testing.postgresql-k8s-2: writes to the db were missed.","children":[{"name":"test_async_replication_failover_in_main_cluster","uid":"7a16fd17f3365822","parentUid":"db744652c31e87f4d777a5c663d2dcd8","status":"failed","time":{"start":1749002116506,"stop":1749002243475,"duration":126969},"flaky":true,"newFailed":true,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires juju 3')"]}],"uid":"db744652c31e87f4d777a5c663d2dcd8"}],"uid":"8fb3a91ba5aaf9de24cc8a92edc82b5d"},{"name":"Test defects","children":[{"name":"tenacity.RetryError: RetryError[<Future at 0x7fca74be72c0 state=finished raised AssertionError>]","children":[{"name":"test_restore_on_new_cluster","uid":"86656c6076d0b2b1","parentUid":"756de41a75cb511b6764715962729689","status":"broken","time":{"start":1749002183587,"stop":1749002625344,"duration":441757},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail"]}],"uid":"756de41a75cb511b6764715962729689"},{"name":"TimeoutError: Timed out waiting for model:\n  postgresql-k8s/0 [allocating] waiting: installing agent\n  postgresql-k8s/1 [allocating] waiting: installing agent\n  postgresql-k8s/2 [allocating] waiting: installing agent","children":[{"name":"test_redeploy_charm_same_model_after_forcing_removal","uid":"e40c820bd79b5c0","parentUid":"0546e1c9110c46e8048c5d1ca9ac5857","status":"broken","time":{"start":1749002656893,"stop":1749003666086,"duration":1009193},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio"]}],"uid":"0546e1c9110c46e8048c5d1ca9ac5857"}],"uid":"bdbf199525818fae7a8651db9eafe741"}]}