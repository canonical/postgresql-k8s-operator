[33mWARNING [0m juju.client.connection:connection.py:582 RPC: Connection closed, reconnecting
[33mWARNING [0m juju.client.connection:connection.py:493 Receiver: Connection closed, reconnecting
[1m[31mERROR   [0m asyncio:base_events.py:1821 Task exception was never retrieved
future: <Task finished name='Task-122' coro=<Connection.reconnect() done, defined at /root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/client/connection.py:700> exception=OSError(9, 'Bad file descriptor')>
Traceback (most recent call last):
  File "/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/client/connection.py", line 712, in reconnect
    res = await connector(
          ^^^^^^^^^^^^^^^^
  File "/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/client/connection.py", line 803, in _connect_with_login
    await self._connect(endpoints)
  File "/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/client/connection.py", line 746, in _connect
    result = await task
             ^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 631, in _wait_for_one
    return f.result()  # May raise f.exception().
           ^^^^^^^^^^
  File "/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/client/connection.py", line 732, in _try_endpoint
    return await self._open(endpoint, cacert)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/client/connection.py", line 333, in _open
    await websockets.connect(
  File "/root/spread_project/.tox/integration/lib/python3.12/site-packages/websockets/asyncio/client.py", line 444, in __await_impl__
    self.connection = await self.create_connection()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/spread_project/.tox/integration/lib/python3.12/site-packages/websockets/asyncio/client.py", line 370, in create_connection
    _, connection = await loop.create_connection(factory, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/base_events.py", line 1149, in create_connection
    transport, protocol = await self._create_connection_transport(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/base_events.py", line 1167, in _create_connection_transport
    sock.setblocking(False)
OSError: [Errno 9] Bad file descriptor
[1m[31mERROR   [0m juju.client.connection:connection.py:590 RPC: Automatic reconnect failed
[32mINFO    [0m integration.test_trust:test_trust.py:74 Connection attempt failed: (0)
Reason: Handshake status 500 Internal Server Error -+-+- {'audit-id': '12832c48-d50a-438a-8012-276e5bf13a7a', 'cache-control': 'no-cache, private', 'content-type': 'application/json', 'warning': '299 - "Use tokens from the TokenRequest API or manually created secret-based tokens instead of auto-generated secret-based tokens."', 'date': 'Wed, 12 Feb 2025 01:39:43 GMT', 'content-length': '168'} -+-+- b'{"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"error dialing backend: dial tcp 10.1.0.9:10250: connect: connection refused","code":500}\n'

[32mINFO    [0m integration.test_trust:test_trust.py:76 Retrying (1/20)...
[32mINFO    [0m integration.test_trust:test_trust.py:71 Connection established: <class 'juju.client._definitions.FullStatus'>({'applications': {}, 'branches': {}, 'controller_timestamp': '2025-02-12T01:39:47.04760081Z', 'filesystems': [], 'machines': {}, 'model': <class 'juju.client._definitions.ModelStatusInfo'>({'available_version': '', 'cloud_tag': 'cloud-microk8s', 'meter_status': <class 'juju.client._definitions.MeterStatus'>({'color': '', 'message': '', 'unknown_fields': {}}), 'model_status': <class 'juju.client._definitions.DetailedStatus'>({'data': {}, 'err': None, 'info': '', 'kind': '', 'life': '', 'since': '2025-02-12T01:39:11.152233125Z', 'status': 'available', 'version': '', 'unknown_fields': {}}), 'name': 'testing', 'region': 'localhost', 'sla': 'unsupported', 'type_': 'caas', 'version': '3.6.2', 'unknown_fields': {}}), 'offers': {}, 'relations': [], 'remote_applications': {}, 'storage': [], 'volumes': [], 'unknown_fields': {}})