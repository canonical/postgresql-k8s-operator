[32mINFO    [0m pytest_operator.plugin:plugin.py:787 Connecting to existing model microk8s-localhost:test on unspecified cloud
[32mINFO    [0m juju.model:__init__.py:2301 Deploying ch:amd64/focal/redis-k8s-7
[32mINFO    [0m juju.model:__init__.py:2301 Deploying local:postgresql-k8s-0
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s (waiting for exactly 3 units, current : 2)
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [executing] maintenance: installing charm software
  postgresql-k8s/1 [executing] maintenance: installing charm software
  postgresql-k8s/2 [executing] maintenance: installing charm software
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [executing] unknown: 
  postgresql-k8s/1 [executing] unknown: 
  postgresql-k8s/2 [idle] waiting: awaiting for cluster to start
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [executing] waiting: awaiting for cluster to start
  postgresql-k8s/1 [executing] waiting: awaiting for cluster to start
  postgresql-k8s/2 [idle] active: Primary
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] waiting: awaiting for cluster to start
  postgresql-k8s/1 [idle] waiting: awaiting for cluster to start
  postgresql-k8s/2 [executing] active: Primary
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] waiting: awaiting for cluster to start
  postgresql-k8s/1 [idle] waiting: awaiting for cluster to start
  postgresql-k8s/2 [idle] active: Primary
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] waiting: awaiting for member to start
  postgresql-k8s/1 [idle] waiting: awaiting for cluster to start
  postgresql-k8s/2 [idle] active: Primary
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] active: 
  postgresql-k8s/1 [idle] waiting: awaiting for member to start
  postgresql-k8s/2 [idle] active: Primary
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] active: 
  postgresql-k8s/1 [idle] active: 
  postgresql-k8s/2 [idle] active: Primary
  redis-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:2301 Deploying ch:amd64/focal/discourse-charmers-discourse-k8s-28
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  discourse-charmers-discourse-k8s/0 [allocating] waiting: installing agent
[33mWARNING [0m juju.model:__init__.py:1683 relate is deprecated and will be removed. Use integrate instead.
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] active: 
  postgresql-k8s/1 [idle] active: 
  postgresql-k8s/2 [idle] active: Primary
  discourse-charmers-discourse-k8s/0 [idle] blocked: db relation is required
  redis-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] active: 
  postgresql-k8s/1 [idle] active: 
  postgresql-k8s/2 [idle] active: Primary
  discourse-charmers-discourse-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  discourse-charmers-discourse-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  discourse-charmers-discourse-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  discourse-charmers-discourse-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  discourse-charmers-discourse-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  discourse-charmers-discourse-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] active: 
  postgresql-k8s/1 [idle] active: 
  postgresql-k8s/2 [idle] active: Primary
[32mINFO    [0m pytest_operator.plugin:plugin.py:929 Model status:

Model  Controller          Cloud/Region        Version  SLA          Timestamp
test   microk8s-localhost  microk8s/localhost  3.6.2    unsupported  01:38:27Z

App             Version               Status  Scale  Charm           Channel        Rev  Address         Exposed  Message
postgresql-k8s  14.15                 active      3  postgresql-k8s                   0  10.152.183.123  no       
redis-k8s       ubuntu/redis@691f315  active      1  redis-k8s       latest/stable    7                  no       

Unit               Workload  Agent  Address      Ports     Message
postgresql-k8s/0   active    idle   10.1.105.76            
postgresql-k8s/1   active    idle   10.1.105.78            
postgresql-k8s/2*  active    idle   10.1.105.77            Primary
redis-k8s/0*       active    idle   10.1.105.80  6379/TCP  

[32mINFO    [0m pytest_operator.plugin:plugin.py:935 Juju error logs:

application-redis-k8s: 01:29:48 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/0fb37948-a655-4bf5-82c6-5c237dc0608b/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-redis-k8s: 01:29:51 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/0fb37948-a655-4bf5-82c6-5c237dc0608b/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-redis-k8s: 01:29:56 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/0fb37948-a655-4bf5-82c6-5c237dc0608b/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-redis-k8s: 01:30:01 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/0fb37948-a655-4bf5-82c6-5c237dc0608b/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-redis-k8s: 01:30:07 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/0fb37948-a655-4bf5-82c6-5c237dc0608b/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-redis-k8s: 01:30:14 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/0fb37948-a655-4bf5-82c6-5c237dc0608b/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-redis-k8s: 01:30:24 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/0fb37948-a655-4bf5-82c6-5c237dc0608b/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-redis-k8s: 01:30:34 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/0fb37948-a655-4bf5-82c6-5c237dc0608b/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-redis-k8s: 01:30:46 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/0fb37948-a655-4bf5-82c6-5c237dc0608b/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-discourse-charmers-discourse-k8s: 01:34:15 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "discourse-charmers-discourse-k8s": failed to download charm "ch:amd64/discourse-charmers-discourse-k8s-28" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/0fb37948-a655-4bf5-82c6-5c237dc0608b/charms?file=%2A&url=ch%3Aamd64%2Fdiscourse-charmers-discourse-k8s-28: cannot retrieve charm: ch:amd64/discourse-charmers-discourse-k8s-28
controller-0: 01:38:25 ERROR juju.worker.caasunitprovisioner stopping application worker for discourse-charmers-discourse-k8s: Operation cannot be fulfilled on deployments.apps "discourse-charmers-discourse-k8s": the object has been modified; please apply your changes to the latest version and try again

[32mINFO    [0m pytest_operator.plugin:plugin.py:1017 Forgetting model main...