[32mINFO    [0m pytest_operator.plugin:plugin.py:787 Connecting to existing model microk8s-localhost:test on unspecified cloud
[32mINFO    [0m juju.model:__init__.py:2301 Deploying ch:amd64/focal/redis-k8s-7
[32mINFO    [0m juju.model:__init__.py:2301 Deploying local:postgresql-k8s-0
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s (waiting for exactly 3 units, current : 2)
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [executing] maintenance: installing charm software
  postgresql-k8s/1 [executing] maintenance: installing charm software
  postgresql-k8s/2 [executing] maintenance: installing charm software
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] unknown: 
  postgresql-k8s/1 [executing] unknown: 
  postgresql-k8s/2 [idle] waiting: awaiting for cluster to start
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [executing] unknown: 
  postgresql-k8s/1 [executing] unknown: 
  postgresql-k8s/2 [executing] waiting: awaiting for primary endpoint to be ready
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] unknown: 
  postgresql-k8s/1 [idle] unknown: 
  postgresql-k8s/2 [idle] active: Primary
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] waiting: awaiting for cluster to start
  postgresql-k8s/1 [idle] waiting: awaiting for cluster to start
  postgresql-k8s/2 [idle] active: Primary
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] waiting: awaiting for cluster to start
  postgresql-k8s/1 [idle] waiting: awaiting for cluster to start
  postgresql-k8s/2 [executing] maintenance: reconfiguring cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] waiting: awaiting for member to start
  postgresql-k8s/1 [idle] waiting: awaiting for cluster to start
  postgresql-k8s/2 [idle] active: Primary
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] active: 
  postgresql-k8s/1 [idle] waiting: awaiting for member to start
  postgresql-k8s/2 [idle] active: Primary
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [executing] active: 
  postgresql-k8s/1 [idle] active: 
  postgresql-k8s/2 [idle] active: Primary
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] active: 
  postgresql-k8s/1 [idle] active: 
  postgresql-k8s/2 [idle] active: Primary
  redis-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:2301 Deploying ch:amd64/focal/discourse-charmers-discourse-k8s-28
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  discourse-charmers-discourse-k8s/0 [allocating] waiting: installing agent
[33mWARNING [0m juju.model:__init__.py:1683 relate is deprecated and will be removed. Use integrate instead.
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] active: 
  postgresql-k8s/1 [idle] active: 
  postgresql-k8s/2 [idle] active: Primary
  discourse-charmers-discourse-k8s/0 [idle] blocked: db relation is required
  redis-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] active: 
  postgresql-k8s/1 [idle] active: 
  postgresql-k8s/2 [idle] active: Primary
  discourse-charmers-discourse-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  discourse-charmers-discourse-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  discourse-charmers-discourse-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  discourse-charmers-discourse-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  discourse-charmers-discourse-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  discourse-charmers-discourse-k8s/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  postgresql-k8s/0 [idle] active: 
  postgresql-k8s/1 [idle] active: 
  postgresql-k8s/2 [idle] active: Primary
[32mINFO    [0m pytest_operator.plugin:plugin.py:929 Model status:

Model  Controller          Cloud/Region        Version  SLA          Timestamp
test   microk8s-localhost  microk8s/localhost  3.6.2    unsupported  01:38:23Z

App             Version               Status  Scale  Charm           Channel        Rev  Address        Exposed  Message
postgresql-k8s  14.15                 active      3  postgresql-k8s                   0  10.152.183.39  no       
redis-k8s       ubuntu/redis@691f315  active      1  redis-k8s       latest/stable    7                 no       

Unit               Workload  Agent  Address      Ports     Message
postgresql-k8s/0   active    idle   10.1.13.140            
postgresql-k8s/1   active    idle   10.1.13.141            
postgresql-k8s/2*  active    idle   10.1.13.142            Primary
redis-k8s/0*       active    idle   10.1.13.144  6379/TCP  

[32mINFO    [0m pytest_operator.plugin:plugin.py:935 Juju error logs:

application-redis-k8s: 01:28:55 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/430b939a-096b-499c-820a-0dd6f235132a/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-redis-k8s: 01:28:58 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/430b939a-096b-499c-820a-0dd6f235132a/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-redis-k8s: 01:29:02 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/430b939a-096b-499c-820a-0dd6f235132a/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-redis-k8s: 01:29:07 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/430b939a-096b-499c-820a-0dd6f235132a/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-redis-k8s: 01:29:13 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/430b939a-096b-499c-820a-0dd6f235132a/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-redis-k8s: 01:29:20 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/430b939a-096b-499c-820a-0dd6f235132a/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-redis-k8s: 01:29:30 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/430b939a-096b-499c-820a-0dd6f235132a/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
application-redis-k8s: 01:29:41 ERROR juju.worker.dependency "operator" manifold worker returned unexpected error: failed to initialize caasoperator for "redis-k8s": failed to download charm "ch:amd64/redis-k8s-7" from API server: Get https://controller-service.controller-microk8s-localhost.svc.cluster.local:17070/model/430b939a-096b-499c-820a-0dd6f235132a/charms?file=%2A&url=ch%3Aamd64%2Fredis-k8s-7: cannot retrieve charm: ch:amd64/redis-k8s-7
unit-postgresql-k8s-1: 01:32:24 ERROR unit.postgresql-k8s/1.juju-log pgdata folder not found in /var/lib/postgresql/data/pgdata

[32mINFO    [0m pytest_operator.plugin:plugin.py:1017 Forgetting model main...