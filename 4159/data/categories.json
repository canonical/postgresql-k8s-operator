{"uid":"4b4757e66a1912dae1a509f688f20b0f","name":"categories","children":[{"name":"Product defects","children":[{"name":"AssertionError: TLS is not being used on pg_rewind connections\nassert 'connection authorized: user=rewind database=postgres SSL enabled' in '/var/log/postgresql/postgresql-3_0132.log:\\t                  SELECT t.user, STRING_AGG(DISTINCT t.database, \\',\\') AS databases FROM( SELECT u.usename AS user, CASE WHEN u.usesuper THEN \\'all\\' ELSE d.datname END AS database FROM ( SELECT usename, usesuper FROM pg_catalog.pg_user WHERE usename NOT IN (\\'backup\\', \\'monitoring\\', \\'operator\\', \\'postgres\\', \\'replication\\', \\'rewind\\')) AS u JOIN ( SELECT datname FROM pg_catalog.pg_database WHERE NOT datistemplate ) AS d ON has_database_privilege(u.usename, d.datname, \\'CONNECT\\') ) AS t GROUP BY 1;\\n/var/log/postgresql/postgresql-3_0132.log:2025-06-18 01:32:51 UTC [885]: user=operator,db=postgres,app=[unknown],client=10.1.0.147,line=15 LOG:  00000: statement: GRANT ALL PRIVILEGES ON DATABASE postgres TO \"rewind\";\\n/var/log/postgresql/postgresql-3_0132.log:2025-06-18 01:32:51 UTC [890]: user=operator,db=postgres,app=[unknown],client=10.1.0.147,line=11 LOG:  00000: statement: GRANT \"internal_access\" TO \"rewind\";\\n/var/log/postgresql/postgresql-3_0138.log:2025-06-18 01:38:44 UTC [6592]: user=operator,db=postgres,app=[unknown],client=10.1.0.147,line=9 LOG:  00000: statement: CREATE TABLE pgrewindtest (testcol INT);\\n/var/log/postgresql/postgresql-3_0138.log:2025-06-18 01:38:44 UTC [6592]: user=operator,db=postgres,app=[unknown],client=10.1.0.147,line=11 LOG:  00000: AUDIT: SESSION,2,1,DDL,CREATE TABLE,TABLE,public.pgrewindtest,CREATE TABLE pgrewindtest (testcol INT);,<not logged>\\n'","children":[{"name":"test_tls","uid":"840047a99a843139","parentUid":"825076bd925e7bdfa44b8314f2165ed8","status":"failed","time":{"start":1750210255696,"stop":1750210953336,"duration":697640},"flaky":true,"newFailed":true,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail"]}],"uid":"825076bd925e7bdfa44b8314f2165ed8"},{"name":"AssertionError: Sync-standby is the same as before\nassert 'postgresql-k8s-1' != 'postgresql-k8s-1'","children":[{"name":"test_async_replication_failover_in_main_cluster","uid":"d4a6c8a68f3cfc97","parentUid":"5fef3f26a4c132e3cbe89cbdeb9835e6","status":"failed","time":{"start":1750211578497,"stop":1750211773559,"duration":195062},"flaky":true,"newFailed":true,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires juju 3')"]}],"uid":"5fef3f26a4c132e3cbe89cbdeb9835e6"},{"name":"AssertionError: testing.postgresql-k8s-1: writes to the db were missed: count of actual writes (171) on testing.postgresql-k8s-1 different from the max number written (194).","children":[{"name":"test_full_cluster_restart[SIGTERM-/usr/bin/patroni]","uid":"6b6ec5acfa44682b","parentUid":"af92f4d86884041907c8a887123b6177","status":"failed","time":{"start":1750211943621,"stop":1750211995897,"duration":52276},"flaky":false,"newFailed":true,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":["'/usr/bin/patroni'","'SIGTERM'"],"tags":["asyncio","abort_on_fail"]}],"uid":"af92f4d86884041907c8a887123b6177"}],"uid":"8fb3a91ba5aaf9de24cc8a92edc82b5d"},{"name":"Test defects","children":[{"name":"TimeoutError","children":[{"name":"test_fail_and_rollback","uid":"ec6c33ad4d9adf48","parentUid":"dfcafd69ae472f4a80c14b338c9d189a","status":"broken","time":{"start":1750211271264,"stop":1750211912413,"duration":641149},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail"]}],"uid":"dfcafd69ae472f4a80c14b338c9d189a"},{"name":"tenacity.RetryError: RetryError[<Future at 0x7f92cbb5ef90 state=finished raised AssertionError>]","children":[{"name":"test_restore_on_new_cluster","uid":"1ca1b9388d2214fc","parentUid":"010266bc3f5c39dc973861f2c04aa03b","status":"broken","time":{"start":1750211381637,"stop":1750211792378,"duration":410741},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail"]}],"uid":"010266bc3f5c39dc973861f2c04aa03b"},{"name":"TimeoutError: Timed out waiting for model:\n  postgresql-k8s/0 [allocating] waiting: installing agent\n  postgresql-k8s/1 [allocating] waiting: installing agent\n  postgresql-k8s/2 [allocating] waiting: installing agent","children":[{"name":"test_redeploy_charm_same_model_after_forcing_removal","uid":"8056fb28c1b0b8b6","parentUid":"0546e1c9110c46e8048c5d1ca9ac5857","status":"broken","time":{"start":1750212181790,"stop":1750213192494,"duration":1010704},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio"]}],"uid":"0546e1c9110c46e8048c5d1ca9ac5857"}],"uid":"bdbf199525818fae7a8651db9eafe741"}]}