{"uid":"c39af7131f16dc3d","name":"test_standby_promotion","fullName":"tests.integration.high_availability.test_async_replication#test_standby_promotion","historyId":"f50f2b7aa9d6f0ad1d763cacd40981bf","time":{"start":1769046017031,"stop":1769046153724,"duration":136693},"description":"Test graceful promotion of a standby cluster to primary.","descriptionHtml":"<p>Test graceful promotion of a standby cluster to primary.</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"second_model","time":{"start":1769045426923,"stop":1769045427157,"duration":234},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1769045426923,"stop":1769045426923,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model","time":{"start":1769045426923,"stop":1769045426923,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1769046017031,"stop":1769046017031,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test graceful promotion of a standby cluster to primary.","status":"passed","steps":[],"attachments":[{"uid":"2b3259cb4b75b9ae","name":"log","source":"2b3259cb4b75b9ae.txt","type":"text/plain","size":3702}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1769046153725,"stop":1769046153725,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model::0","time":{"start":1769046165951,"stop":1769046166456,"duration":505},"status":"broken","statusMessage":"jubilant._juju.CLIError: Command '['juju', 'destroy-model', 'testing-other', '--no-prompt', '--destroy-storage', '--force']' returned non-zero exit status 1.\nStderr:\nERROR cannot connect to API: connection is shut down\n\n","statusTrace":"  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/allure_commons/_allure.py\", line 231, in __call__\n    return self._fixture_function(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/fixtures.py\", line 924, in _teardown_yield_fixture\n    next(it)\n  File \"/root/spread_project/tests/integration/high_availability/test_async_replication.py\", line 53, in second_model\n    juju.destroy_model(model_name, destroy_storage=True, force=True)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant/_juju.py\", line 642, in destroy_model\n    self.cli(*args, include_model=False)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant/_juju.py\", line 376, in cli\n    stdout, _ = self._cli(*args, include_model=include_model, stdin=stdin)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant/_juju.py\", line 402, in _cli\n    raise CLIError(e.returncode, e.cmd, e.stdout, e.stderr) from None\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"juju::0","time":{"start":1769046166457,"stop":1769046166457,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model::0","time":{"start":1769046166457,"stop":1769046166457,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_async_replication"},{"name":"host","value":"runnervmmtnos"},{"name":"thread","value":"19735-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_async_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"725cc41ae634daf9","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":2,"unknown":6,"total":8},"items":[{"uid":"f7f124bd4ce25a89","reportUrl":"../5064//#testresult/f7f124bd4ce25a89","status":"passed","time":{"start":1768959606058,"stop":1768959749924,"duration":143866}},{"uid":"150a01a29d55652c","reportUrl":"../5047//#testresult/150a01a29d55652c","status":"unknown","time":{}},{"uid":"3d549530680ad749","reportUrl":"../5041//#testresult/3d549530680ad749","status":"unknown","time":{}},{"uid":"373266c3ae9e427b","reportUrl":"../5038//#testresult/373266c3ae9e427b","status":"unknown","time":{}},{"uid":"e75b4fbc211db068","reportUrl":"../5036//#testresult/e75b4fbc211db068","status":"unknown","time":{}},{"uid":"cdd45257415d1d9d","reportUrl":"../5034//#testresult/cdd45257415d1d9d","status":"unknown","time":{}},{"uid":"34e88d591fe0dd80","reportUrl":"../5018//#testresult/34e88d591fe0dd80","status":"unknown","time":{}}]},"tags":[]},"source":"c39af7131f16dc3d.json","parameterValues":[]}