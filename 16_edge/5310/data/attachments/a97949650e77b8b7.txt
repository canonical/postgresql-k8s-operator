[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m integration.high_availability.conftest:conftest.py:22 Clearing continuous writes
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql-test-app/0 clear-continuous-writes --wait 120s
[32mINFO    [0m integration.high_availability.conftest:conftest.py:25 Starting continuous writes
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql-test-app/0 start-continuous-writes
[32mINFO    [0m root:test_upgrade.py:76 Ensure continuous writes are incrementing
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql-k8s/0 get-primary --wait 300s
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d6cglp47910s7biio85g --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d6cglp47910s7biio85g --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d6cglp47910s7biio85g --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d6cglp47910s7biio85g --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql-k8s/0 get-primary --wait 300s
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m root:high_availability_helpers_new.py:266 Refresh the charm
[32mINFO    [0m jubilant:_juju.py:394 cli: juju refresh --model testing postgresql-k8s --path /root/snap/juju/common/tmp2hbfej3n/_temp.charm --resource postgresql-image=ghcr.io/canonical/charmed-postgresql@sha256:fcb648db2c418403fbf5f58f04892c4677f113526097ca7314cbd9f527bb1baf
[32mINFO    [0m root:high_availability_helpers_new.py:274 Wait for refresh to block as paused or incompatible
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m root:high_availability_helpers_new.py:288 Application refresh is blocked due to incompatibility
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql-k8s/2 force-refresh-start --wait 300s --params /root/snap/juju/common/tmpjiiu2dix
[32mINFO    [0m root:high_availability_helpers_new.py:304 Run resume-refresh action
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql-k8s/0 resume-refresh --wait 300s
[32mINFO    [0m root:high_availability_helpers_new.py:311 Wait for upgrade to complete
[32mINFO    [0m root:test_upgrade.py:83 Ensure continuous writes are incrementing
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql-k8s/0 get-primary --wait 300s
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d6cglp47910s7biio85g --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d6cglp47910s7biio85g --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d6cglp47910s7biio85g --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d6cglp47910s7biio85g --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m root:test_upgrade.py:86 checking the number of switchovers
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql-k8s/0 get-primary --wait 300s
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m integration.high_availability.conftest:conftest.py:36 Clearing continuous writes
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql-test-app/0 clear-continuous-writes --wait 120s