{"uid":"2f1a6bb795e44e4b","name":"test_deploy","fullName":"tests.integration.test_predefined_roles#test_deploy","historyId":"75035c3b185e31f300a7c50bbaff907a","time":{"start":1771032653286,"stop":1771032677121,"duration":23835},"description":"Deploy and relate the charms.","descriptionHtml":"<p>Deploy and relate the charms.</p>\n","status":"broken","statusMessage":"jubilant._juju.CLIError: Command '['juju', 'integrate', '--model', 'testing', 'data-integrator-charmed-dba', 'postgresql-k8s']' returned non-zero exit status 1.\nStderr:\nERROR connection is shut down","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 353, in from_call\n    result: TResult | None = func()\n                             ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 245, in <lambda>\n    lambda: runtest_hook(item=item, **kwds),\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    raise exception\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/logging.py\", line 850, in pytest_runtest_call\n    yield\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/capture.py\", line 900, in pytest_runtest_call\n    return (yield)\n            ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/skipping.py\", line 268, in pytest_runtest_call\n    return (yield)\n            ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 179, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1720, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    raise exception\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 166, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/test_predefined_roles.py\", line 88, in test_deploy\n    juju.integrate(data_integrator_app_name, DATABASE_APP_NAME)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant/_juju.py\", line 783, in integrate\n    self.cli(*args)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant/_juju.py\", line 379, in cli\n    stdout, _ = self._cli(*args, include_model=include_model, stdin=stdin)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant/_juju.py\", line 405, in _cli\n    raise CLIError(e.returncode, e.cmd, e.stdout, e.stderr) from None\njubilant._juju.CLIError: Command '['juju', 'integrate', '--model', 'testing', 'data-integrator-charmed-dba', 'postgresql-k8s']' returned non-zero exit status 1.\nStderr:\nERROR connection is shut down","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"juju","time":{"start":1771032653285,"stop":1771032653285,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm","time":{"start":1771032653285,"stop":1771032653285,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1771032653286,"stop":1771032653286,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"predefined_roles_combinations","time":{"start":1771032653286,"stop":1771032653286,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Deploy and relate the charms.","status":"broken","statusMessage":"jubilant._juju.CLIError: Command '['juju', 'integrate', '--model', 'testing', 'data-integrator-charmed-dba', 'postgresql-k8s']' returned non-zero exit status 1.\nStderr:\nERROR connection is shut down","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 353, in from_call\n    result: TResult | None = func()\n                             ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 245, in <lambda>\n    lambda: runtest_hook(item=item, **kwds),\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    raise exception\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/logging.py\", line 850, in pytest_runtest_call\n    yield\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/capture.py\", line 900, in pytest_runtest_call\n    return (yield)\n            ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/skipping.py\", line 268, in pytest_runtest_call\n    return (yield)\n            ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 179, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1720, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    raise exception\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 166, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/test_predefined_roles.py\", line 88, in test_deploy\n    juju.integrate(data_integrator_app_name, DATABASE_APP_NAME)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant/_juju.py\", line 783, in integrate\n    self.cli(*args)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant/_juju.py\", line 379, in cli\n    stdout, _ = self._cli(*args, include_model=include_model, stdin=stdin)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant/_juju.py\", line 405, in _cli\n    raise CLIError(e.returncode, e.cmd, e.stdout, e.stderr) from None\njubilant._juju.CLIError: Command '['juju', 'integrate', '--model', 'testing', 'data-integrator-charmed-dba', 'postgresql-k8s']' returned non-zero exit status 1.\nStderr:\nERROR connection is shut down","steps":[],"attachments":[{"uid":"693a29324f7977b7","name":"log","source":"693a29324f7977b7.txt","type":"text/plain","size":6552}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1771032677127,"stop":1771032677127,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::0","time":{"start":1771032677128,"stop":1771032677128,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_predefined_roles"},{"name":"host","value":"runnervmjduv7"},{"name":"thread","value":"17391-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_predefined_roles"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"84c2aea3094fc679","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":29,"unknown":0,"total":30},"items":[{"uid":"2c8b8cb155895ed1","reportUrl":"../5243//#testresult/2c8b8cb155895ed1","status":"passed","time":{"start":1770946295437,"stop":1770946537963,"duration":242526}},{"uid":"c0b61ea2a3fc45c8","reportUrl":"../5236//#testresult/c0b61ea2a3fc45c8","status":"passed","time":{"start":1770859919610,"stop":1770860131157,"duration":211547}},{"uid":"91cb5dc6d8544153","reportUrl":"../5207//#testresult/91cb5dc6d8544153","status":"passed","time":{"start":1770687442386,"stop":1770687672670,"duration":230284}},{"uid":"5b0ec40abe051840","reportUrl":"../5187//#testresult/5b0ec40abe051840","status":"passed","time":{"start":1770600698910,"stop":1770600937368,"duration":238458}},{"uid":"76823bb3b90911d6","reportUrl":"../5184//#testresult/76823bb3b90911d6","status":"passed","time":{"start":1770514336528,"stop":1770514571310,"duration":234782}},{"uid":"3a071dbc85fc71c6","reportUrl":"../5176//#testresult/3a071dbc85fc71c6","status":"passed","time":{"start":1770427893333,"stop":1770428136234,"duration":242901}},{"uid":"df713dada02aadde","reportUrl":"../5169//#testresult/df713dada02aadde","status":"passed","time":{"start":1770341462222,"stop":1770341695795,"duration":233573}},{"uid":"46d6c9db0033ba07","reportUrl":"../5158//#testresult/46d6c9db0033ba07","status":"passed","time":{"start":1770255107067,"stop":1770255339337,"duration":232270}},{"uid":"df972598bff57f14","reportUrl":"../5152//#testresult/df972598bff57f14","status":"passed","time":{"start":1770168690636,"stop":1770168938766,"duration":248130}},{"uid":"907df515a35c3b86","reportUrl":"../5136//#testresult/907df515a35c3b86","status":"passed","time":{"start":1770083334749,"stop":1770083579997,"duration":245248}},{"uid":"ed2308e28a557afd","reportUrl":"../5129//#testresult/ed2308e28a557afd","status":"passed","time":{"start":1769995886918,"stop":1769996118411,"duration":231493}},{"uid":"24cdca53ab4ee440","reportUrl":"../5127//#testresult/24cdca53ab4ee440","status":"passed","time":{"start":1769909484673,"stop":1769909750805,"duration":266132}},{"uid":"af321a6d7f398bcc","reportUrl":"../5123//#testresult/af321a6d7f398bcc","status":"passed","time":{"start":1769823100693,"stop":1769823329112,"duration":228419}},{"uid":"939209f0f4c56c49","reportUrl":"../5120//#testresult/939209f0f4c56c49","status":"passed","time":{"start":1769736847840,"stop":1769737088460,"duration":240620}},{"uid":"8d17bc9cd42096cf","reportUrl":"../5113//#testresult/8d17bc9cd42096cf","status":"passed","time":{"start":1769650516694,"stop":1769650735735,"duration":219041}},{"uid":"d59abd6da4464c7a","reportUrl":"../5105//#testresult/d59abd6da4464c7a","status":"passed","time":{"start":1769564194470,"stop":1769564433229,"duration":238759}},{"uid":"e39575b0b8a711d1","reportUrl":"../5097//#testresult/e39575b0b8a711d1","status":"passed","time":{"start":1769477847504,"stop":1769478071088,"duration":223584}},{"uid":"c2d41160f745f1e6","reportUrl":"../5089//#testresult/c2d41160f745f1e6","status":"passed","time":{"start":1769391025348,"stop":1769391268874,"duration":243526}},{"uid":"5d322448eb626a77","reportUrl":"../5087//#testresult/5d322448eb626a77","status":"passed","time":{"start":1769304644414,"stop":1769304868008,"duration":223594}},{"uid":"c1f0b4c92d1bcb3b","reportUrl":"../5081//#testresult/c1f0b4c92d1bcb3b","status":"passed","time":{"start":1769219805395,"stop":1769220039846,"duration":234451}}]},"tags":["abort_on_fail"]},"source":"2f1a6bb795e44e4b.json","parameterValues":[]}